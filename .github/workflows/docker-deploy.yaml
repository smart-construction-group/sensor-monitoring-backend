name: docker-deploy
run-name: ${{ github.actor }} is deploying with docker
on: [push]
jobs:
  deploy:
    runs-on: self-hosted
    environment:
      name: production
    env:
      xxx2: ${{ environment.REST_PORT }}
      xxx3: ${{ environment }}
    steps:
      -
        name: Testing environment
        run: echo ${{environment}}
      -
        name: Checkout
        uses: actions/checkout@v3
      -
        name: Check env
        run: echo "environment variables:\n"; env
      -
        name: Docker Build
        run: docker-compose up --build -d